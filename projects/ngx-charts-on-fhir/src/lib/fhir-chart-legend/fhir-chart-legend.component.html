<div class="legend">
  <ng-container *ngFor="let layer of layerManager.enabledLayers$ | async">
    <ng-container *ngFor="let dataset of layer.datasets|sortDatasets">
      <div class="legend-item" *ngIf="!dataset.hidden">
        <div class="legend-icon" [ngSwitch]="dataset.pointStyle" [style.color]="colorService.getColor(dataset)">
          <mat-icon *ngSwitchCase="'circle'">circle</mat-icon>
          <mat-icon *ngSwitchCase="'rect'">square</mat-icon>
          <mat-icon *ngSwitchCase="'rectRot'" style="rotate: 45deg; scale: 0.8">square</mat-icon>
          <mat-icon *ngSwitchCase="'triangle'" svgIcon="triangle"></mat-icon>
          <mat-icon *ngSwitchDefault>square</mat-icon>
        </div>
        <div>
          {{ dataset.label }}
        </div>
      </div>
    </ng-container>
  </ng-container>
</div>